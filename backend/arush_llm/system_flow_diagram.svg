<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
    Multi-Agent Playground - Kani Integration System Flow
  </text>
  
  <!-- Frontend/Godot -->
  <rect x="50" y="60" width="120" height="40" fill="#4CAF50" stroke="#333" stroke-width="2" rx="5"/>
  <text x="110" y="85" text-anchor="middle" font-family="Arial" font-size="12" fill="white">Frontend/Godot</text>
  
  <!-- controller.py -->
  <rect x="300" y="60" width="100" height="40" fill="#2196F3" stroke="#333" stroke-width="2" rx="5"/>
  <text x="350" y="85" text-anchor="middle" font-family="Arial" font-size="12" fill="white">controller.py</text>
  
  <!-- plan_next_action -->
  <rect x="500" y="60" width="120" height="40" fill="#FF9800" stroke="#333" stroke-width="2" rx="5"/>
  <text x="560" y="85" text-anchor="middle" font-family="Arial" font-size="12" fill="white">plan_next_action</text>
  
  <!-- call_llm_agent -->
  <rect x="500" y="140" width="120" height="40" fill="#FF5722" stroke="#333" stroke-width="2" rx="5"/>
  <text x="560" y="165" text-anchor="middle" font-family="Arial" font-size="12" fill="white">call_llm_agent</text>
  
  <!-- KaniAgentManager -->
  <rect x="350" y="220" width="120" height="40" fill="#f3e5f5" stroke="#333" stroke-width="2" rx="5"/>
  <text x="410" y="245" text-anchor="middle" font-family="Arial" font-size="12">KaniAgentManager</text>
  
  <!-- KaniAgent -->
  <rect x="350" y="300" width="120" height="40" fill="#e1f5fe" stroke="#333" stroke-width="2" rx="5"/>
  <text x="410" y="325" text-anchor="middle" font-family="Arial" font-size="12">KaniAgent</text>
  
  <!-- Kani Engine -->
  <rect x="350" y="380" width="120" height="40" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5"/>
  <text x="410" y="405" text-anchor="middle" font-family="Arial" font-size="12">Kani Engine</text>
  
  <!-- OpenAI API -->
  <rect x="350" y="460" width="120" height="40" fill="#E91E63" stroke="#333" stroke-width="2" rx="5"/>
  <text x="410" y="485" text-anchor="middle" font-family="Arial" font-size="12" fill="white">OpenAI API</text>
  
  <!-- AgentMemory -->
  <rect x="120" y="300" width="100" height="40" fill="#9C27B0" stroke="#333" stroke-width="2" rx="5"/>
  <text x="170" y="325" text-anchor="middle" font-family="Arial" font-size="12" fill="white">AgentMemory</text>
  
  <!-- LocationTracker -->
  <rect x="120" y="380" width="100" height="40" fill="#3F51B5" stroke="#333" stroke-width="2" rx="5"/>
  <text x="170" y="405" text-anchor="middle" font-family="Arial" font-size="12" fill="white">LocationTracker</text>
  
  <!-- ObjectManager -->
  <rect x="580" y="300" width="100" height="40" fill="#795548" stroke="#333" stroke-width="2" rx="5"/>
  <text x="630" y="325" text-anchor="middle" font-family="Arial" font-size="12" fill="white">ObjectManager</text>
  
  <!-- JSON Memory Files -->
  <rect x="50" y="460" width="100" height="40" fill="#607D8B" stroke="#333" stroke-width="2" rx="5"/>
  <text x="100" y="485" text-anchor="middle" font-family="Arial" font-size="12" fill="white">JSON Memory</text>
  
  <!-- Interactive Objects -->
  <rect x="650" y="380" width="100" height="40" fill="#8BC34A" stroke="#333" stroke-width="2" rx="5"/>
  <text x="700" y="405" text-anchor="middle" font-family="Arial" font-size="12">Interactive Objects</text>
  
  <!-- Arrows -->
  <!-- Frontend to controller -->
  <path d="M 170 80 Q 235 80 300 80" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="235" y="75" text-anchor="middle" font-family="Arial" font-size="10">AgentPerception</text>
  
  <!-- controller to plan_next_action -->
  <path d="M 400 80 Q 450 80 500 80" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- plan_next_action to call_llm_agent -->
  <path d="M 560 100 Q 560 120 560 140" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- call_llm_agent to KaniAgentManager -->
  <path d="M 530 180 Q 470 200 430 220" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- KaniAgentManager to KaniAgent -->
  <path d="M 410 260 Q 410 280 410 300" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- KaniAgent to Kani Engine -->
  <path d="M 410 340 Q 410 360 410 380" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Kani Engine to OpenAI API -->
  <path d="M 410 420 Q 410 440 410 460" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- KaniAgent to AgentMemory -->
  <path d="M 350 320 Q 285 320 220 320" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- KaniAgent to ObjectManager -->
  <path d="M 470 320 Q 525 320 580 320" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- AgentMemory to JSON Memory -->
  <path d="M 170 340 Q 135 400 100 460" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- LocationTracker to Agent Position Data (represented as text) -->
  <text x="170" y="440" text-anchor="middle" font-family="Arial" font-size="10">Agent Position Data</text>
  
  <!-- ObjectManager to Interactive Objects -->
  <path d="M 630 340 Q 665 360 700 380" fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Return path indication -->
  <text x="400" y="550" text-anchor="middle" font-family="Arial" font-size="12" font-style="italic">
    ‚Üê Return path: AgentActionOutput flows back through the same components
  </text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
     refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
</svg>